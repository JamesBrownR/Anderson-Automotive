<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Anderson Automotive</title>
<meta name="description" content="Anderson Automotive - Auto repair and service in Oklahoma City. Call +1 (405) 896-8184" />
<style>
  :root{
    --accent-red: #d62b2b;
    --accent-dark: #1b1b1d;
    --bg-dark: #0f0f10;
    --muted: #f2f2f2;
    --card-bg: #111213;
    --accent-light: #ff5a5a;
    --max-width: 1100px;
    --radius: 12px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#0b0b0c 0%, #131213 100%);
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    line-height:1.45;
  }

  header{
    background: linear-gradient(90deg, rgba(214,43,43,0.95), rgba(40,6,6,0.85));
    padding:14px 18px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    position:sticky;
    top:0;
    z-index:50;
  }
  .brand{
    display:flex;
    align-items:center;
    gap:14px;
  }
  .brand h1{
    margin:0;
    font-size:26px;
    letter-spacing:2px;
    color:#fff;
    text-shadow:0 2px 6px rgba(0,0,0,0.4);
  }
  .top-contact{
    text-align:right;
    font-size:14px;
  }
  .top-contact a{
    color:var(--muted);
    text-decoration:none;
    display:inline-block;
    margin-left:6px;
  }
  .tel{
    font-weight:700;
    color: #fff;
    background: rgba(0,0,0,0.14);
    padding:6px 10px;
    border-radius:8px;
    display:inline-block;
  }

  main{
    max-width:var(--max-width);
    margin:24px auto;
    padding:0 18px 80px;
  }

  .hero{
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:18px;
    margin-bottom:20px;
  }
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius: var(--radius);
    padding:18px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.55);
    border:1px solid rgba(255,255,255,0.03);
  }

  .about h2{
    margin:0 0 6px 0;
    color:var(--accent-red);
    font-size:20px;
  }
  .about p{margin:6px 0 0 0; color:#e9e9e9; font-size:15px}

  .hours{
    margin-top:12px;
    font-size:14px;
    color:#dcdcdc;
  }
  .hours .row{display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px dashed rgba(255,255,255,0.03)}
  .hours .row:last-child{border-bottom:none}

  .map-embed{
    height:300px;
    border-radius:10px;
    overflow:hidden;
  }

  .gallery{
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap:10px;
    margin-top:14px;
  }
  .gallery img{
    width:100%;
    height:140px;
    object-fit:cover;
    border-radius:8px;
    display:block;
  }

  .contact-grid{
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  form label{display:block; font-size:13px; margin-bottom:6px;}
  form input, form textarea, form select{
    width:100%;
    padding:10px 12px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);
    background: rgba(0,0,0,0.18);
    color:var(--muted);
    font-size:14px;
    outline:none;
  }
  .btn{
    display:inline-flex;
    align-items:center;
    gap:8px;
    background:var(--accent-red);
    color:#fff;
    padding:10px 14px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    box-shadow: 0 6px 18px rgba(214,43,43,0.12);
  }

  .reviews-grid{
    margin-top:16px;
    display:grid;
    gap:10px;
  }
  .review{
    display:flex;
    gap:12px;
    align-items:flex-start;
    padding:10px;
    border-radius:10px;
    background: rgba(255,255,255,0.01);
    border:1px solid rgba(255,255,255,0.02);
  }
  .avatar{
    width:44px;
    height:44px;
    border-radius:50%;
    background:linear-gradient(180deg,#ffffff10,#00000010);
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    color:#fff;
    flex-shrink:0;
  }
  .rbody{flex:1}
  .rhead{display:flex; align-items:center; justify-content:space-between; gap:8px}
  .rhead .name{font-weight:700; color:#fff}
  .stars{font-size:14px; color:var(--accent-light)}
  .rtext{margin-top:6px; color:#d9d9d9; font-size:14px; min-height:18px}

  .meta{
    display:flex;
    gap:8px;
    margin-top:9px;
    font-size:13px;
    color:#cfcfcf;
  }

  footer{
    margin-top:40px;
    text-align:center;
    color:#cfcfcf;
    font-size:14px;
  }

  /* responsive */
  @media (max-width:940px){
    .hero{grid-template-columns: 1fr}
    .brand h1{font-size:20px}
  }
  @media (max-width:520px){
    .map-embed{height:220px}
    .gallery img{height:110px}
  }

  /* small utility */
  .muted{color:#cfcfcf; font-size:13px}
  .small{font-size:13px}
  .center{display:flex; align-items:center; gap:8px}
  .hidden{display:none}
</style>
</head>
<body>
<header>
  <div class="brand" aria-label="Anderson Automotive">
    <img src="" alt="" id="logo" style="width:46px;height:46px;border-radius:6px;background:#fff2;display:block"/>
    <h1>ANDERSON AUTOMOTIVE</h1>
  </div>
  <div class="top-contact">
    <div class="center">
      <!-- Click-to-call number for immediate mobile calls -->
      <a class="tel" href="tel:+14058968184" aria-label="Call Anderson Automotive">+1 (405) 896-8184</a>
      <a href="mailto:andersonroadautomotive@gmail.com" title="Email Anderson Automotive" style="color:#fff;text-decoration:underline">andersonroadautomotive@gmail.com</a>
    </div>
    <div class="muted">7500 S Anderson Rd, Oklahoma City, OK 73150</div>
  </div>
</header>

<main>
  <section class="hero">
    <div class="card about" aria-labelledby="about-title">
      <h2 id="about-title">Anderson Automotive</h2>
      <p>Full-service auto repair in Oklahoma City. Honest diagnostics, fast turnarounds, and satisfied customers.</p>

      <div class="hours card" style="margin-top:12px;">
        <strong style="color:var(--accent-red)">Hours</strong>
        <div class="row"><span>Friday</span><span>8 AM – 5 PM</span></div>
        <div class="row"><span>Saturday</span><span>8 AM – 5 PM</span></div>
        <div class="row"><span>Sunday</span><span>Closed</span></div>
        <div class="row"><span>Monday</span><span>8 AM – 5 PM</span></div>
        <div class="row"><span>Tuesday</span><span>8 AM – 5 PM</span></div>
        <div class="row"><span>Wednesday</span><span>8 AM – 5 PM</span></div>
        <div class="row"><span>Thursday</span><span>8 AM – 5 PM</span></div>
      </div>

      <div style="margin-top:12px;">
        <strong style="color:var(--accent-red)">Location</strong>
        <div class="muted small">7500 S Anderson Rd, Oklahoma City, OK 73150</div>
      </div>

      <div style="margin-top:12px;">
        <strong style="color:var(--accent-red)">Live Map</strong>
        <div class="map-embed" style="margin-top:8px;">
          <!-- Live Google Maps embed for the address -->
          <iframe
            src="https://www.google.com/maps?q=7500+S+Anderson+Rd,+Oklahoma+City,+OK+73150&output=embed"
            width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
      </div>

      <div style="margin-top:12px;">
        <strong style="color:var(--accent-red)">Photo Gallery</strong>
        <div class="gallery" id="gallery">
          <!-- Images that will be found in the GitHub repo: Andersonautophotos1..6 -->
          <img src="Andersonautophotos1.png" alt="Anderson Automotive photo 1" onerror="this.style.opacity=0.6" />
          <img src="Andersonautophotos2.png" alt="Anderson Automotive photo 2" onerror="this.style.opacity=0.6" />
          <img src="Andersonautophotos3.png" alt="Anderson Automotive photo 3" onerror="this.style.opacity=0.6" />
          <img src="Andersonautophotos4.png" alt="Anderson Automotive photo 4" onerror="this.style.opacity=0.6" />
          <img src="Andersonautophotos5.png" alt="Anderson Automotive photo 5" onerror="this.style.opacity=0.6" />
          <img src="Andersonautophotos6.png" alt="Anderson Automotive photo 6" onerror="this.style.opacity=0.6" />
        </div>
      </div>
    </div>

    <aside class="card contact-grid" aria-label="Contact & booking">
      <div>
        <h3 style="margin:0 0 6px 0;color:var(--accent-red)">Contact & Request Estimate</h3>
        <p class="muted">Call or submit this form. For immediate call, tap the phone number above.</p>
      </div>

      <form id="contactForm" class="card" aria-label="Contact form">
        <input type="hidden" id="formSubject" value="Website Inquiry - Anderson Automotive" />
        <div style="display:grid; gap:10px;">
          <label for="name">Name</label>
          <input id="name" name="name" placeholder="Your name" required />

          <label for="phone">Phone</label>
          <input id="phone" name="phone" placeholder="+1 (555) 555-5555" />

          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required />

          <label for="message">Message / Request</label>
          <textarea id="message" name="message" rows="4" placeholder="Describe your issue or request"></textarea>

          <div style="display:flex; gap:8px; justify-content:space-between; align-items:center;">
            <button type="submit" class="btn">Send Message</button>
            <small class="muted">Or call: <a href="tel:+14058968184" style="color:var(--accent-light);text-decoration:underline">+1 (405) 896-8184</a></small>
          </div>

          <div id="formStatus" class="muted small" style="margin-top:6px;"></div>
        </div>
      </form>

      <div style="margin-top:8px; color:#eaeaea;">
        <strong style="color:var(--accent-red)">Quick Links</strong>
        <div class="muted small" style="margin-top:8px;">
          <div><a href="tel:+14058968184" style="color:inherit;text-decoration:underline">Call: +1 (405) 896-8184</a></div>
          <div><a href="mailto:andersonroadautomotive@gmail.com" style="color:inherit;text-decoration:underline">andersonroadautomotive@gmail.com</a></div>
          <div><a href="https://github.com/JamesBrownR/Anderson-Automotive/" target="_blank" style="color:inherit;text-decoration:underline">Repo</a></div>
          <div style="margin-top:8px;">Square Location ID: <code id="squareIdLabel">YOUR_LOCATION_ID</code></div>
        </div>
      </div>
    </aside>
  </section>

  <section class="card">
    <h2 style="color:var(--accent-red); margin-top:0">Customer Reviews</h2>
    <p class="muted small">All reviews displayed with star ratings. You can paste your full reviews array in the JavaScript section of this file (see the `REVIEWS` area / instructions).</p>

    <div class="reviews-grid" id="reviewsGrid" aria-live="polite"></div>

    <div style="margin-top:12px; display:flex; gap:10px; align-items:center;">
      <button id="toggleMore" class="btn" style="display:none">Show more</button>
      <div id="reviewsCount" class="muted small"></div>
    </div>
  </section>

  <footer class="muted" style="margin-top:22px;">
    &copy; <span id="year"></span> Anderson Automotive — 7500 S Anderson Rd, Oklahoma City, OK 73150
  </footer>

</main>

<script>
/*
  IMPORTANT INSTRUCTIONS (READ BEFORE EDITING):
  - Replace the Square location ID: set the SQUARE_LOCATION_ID below to your real ID.
  - If you want contact form to POST to a service, set FORM_ENDPOINT to the URL (e.g., Formspree endpoint).
  - To populate reviews, replace the REVIEWS array content below with the exact review objects you have.
    The site expects an array of objects in this compressed format (no extra text), for example:
      { name: "Reviewer 9", rating: 5, body: "" },
    Paste those lines between the square brackets. Do NOT change the rendering code unless you know JS.
  - The display logic will show 6 reviews initially and reveal 6 more each time "Show more" is clicked.
*/

/* Replace this with your Square Location ID */
const SQUARE_LOCATION_ID = 'YOUR_LOCATION_ID'; // <<--- REPLACE HERE

// OPTIONAL: If you have a form endpoint (Formspree or other), set it here.
// If left as null/empty, the script will fallback to mailto: to send the message using user's client.
const FORM_ENDPOINT = ''; // e.g. 'https://formspree.io/f/xxxxxxxx' or leave '' to fallback to mailto

document.getElementById('squareIdLabel').textContent = SQUARE_LOCATION_ID || 'YOUR_LOCATION_ID';
document.getElementById('year').textContent = new Date().getFullYear();

/* -------------------------
   REVIEWS ARRAY - PASTE HERE
   Replace the sample entries below with your actual review objects.
   Keep the same format: { name: "Name", rating: 5, body: "" },
   Example of compressed empty-body review:
     { name: "Reviewer 9", rating: 5, body: "" },
   If you have Brian Rose (3) or Wanda WalPole (4) include their ratings exactly as provided.
   ------------------------- */
const REVIEWS = [
  // Sample/demo reviews. Replace these lines with your exact review objects.
  { name: "R R", rating: 5, body: "" },
  { name: "Lindsay King", rating: 5, body: "" },
  { name: "Ron Murray", rating: 5, body: "" },
  { name: "chaynee malone", rating: 5, body: "" },
  { name: "jeff hays", rating: 5, body: "" },
  { name: "Ashley England", rating: 5, body: "" },
  { name: "Kaden Woodring", rating: 5, body: "" },
  { name: "Anthony Jade", rating: 5, body: "" },
  { name: "hot chocol8te", rating: 5, body: "" },
  { name: "Karen Stone", rating: 5, body: "" },
  { name: "Brian Rose", rating: 3, body: "" },
  { name: "Wanda WalPole", rating: 4, body: "" },
  { name: "Reviewer 13", rating: 5, body: "" }
];
/* -------------------------
   END REVIEWS ARRAY
   ------------------------- */

(function renderReviews(){
  const grid = document.getElementById('reviewsGrid');
  const toggleBtn = document.getElementById('toggleMore');
  const countLabel = document.getElementById('reviewsCount');

  // Defensive: ensure array is valid
  const reviews = Array.isArray(REVIEWS) ? REVIEWS : [];

  // create star string
  function stars(r){
    const full = '★'.repeat(Math.max(0, Math.round(r || 0)));
    const empty = '☆'.repeat(Math.max(0, 5 - Math.round(r || 0)));
    return '<span class="stars" aria-hidden="true">'+full+empty+'</span>';
  }

  // create avatar initials
  function initials(name){
    if(!name) return 'AA';
    const parts = name.trim().split(/\s+/).filter(Boolean);
    if(parts.length === 1) return (parts[0][0] || 'A').toUpperCase();
    return ((parts[0][0]||'A') + (parts[1][0]||'A')).toUpperCase();
  }

  // Render review card
  function renderReviewHTML(r){
    const safeName = (r.name || 'Anonymous');
    const safeBody = (r.body || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    return `
      <div class="review">
        <div class="avatar" aria-hidden="true">${initials(safeName)}</div>
        <div class="rbody">
          <div class="rhead">
            <div class="name">${safeName}</div>
            <div>${stars(r.rating)}</div>
          </div>
          <div class="rtext">${safeBody || '<span class="muted">No comment provided</span>'}</div>
          <div class="meta"><div class="muted small">Verified customer</div></div>
        </div>
      </div>
    `;
  }

  // Pagination logic: show first 6 and reveal 6 more each click
  const PAGE_SIZE = 6;
  let visible = Math.min(PAGE_SIZE, reviews.length);

  function updateUI(){
    grid.innerHTML = reviews.slice(0, visible).map(renderReviewHTML).join('');
    if(visible < reviews.length){
      toggleBtn.style.display = 'inline-flex';
      toggleBtn.textContent = `Show more (${Math.min(PAGE_SIZE, reviews.length-visible)} more)`;
    } else if(reviews.length > PAGE_SIZE){
      toggleBtn.style.display = 'inline-flex';
      toggleBtn.textContent = 'Show less';
    } else {
      toggleBtn.style.display = 'none';
    }
    countLabel.textContent = `${Math.min(visible, reviews.length)} of ${reviews.length} reviews`;
  }

  toggleBtn.addEventListener('click', ()=>{
    if(visible < reviews.length){
      // reveal next PAGE_SIZE reviews
      visible = Math.min(reviews.length, visible + PAGE_SIZE);
    } else {
      // collapse back to first PAGE_SIZE
      visible = Math.min(PAGE_SIZE, reviews.length);
    }
    updateUI();
  });

  updateUI();
})();

/* -----------------------------
   CONTACT FORM HANDLING
   - If FORM_ENDPOINT is set, POST JSON to it.
   - Otherwise fallback to generating a mailto: link so user's email client opens.
   ----------------------------- */
(function setupForm(){
  const form = document.getElementById('contactForm');
  const status = document.getElementById('formStatus');

  form.addEventListener('submit', async (ev)=>{
    ev.preventDefault();
    status.textContent = 'Sending...';

    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const email = document.getElementById('email').value.trim();
    const msg = document.getElementById('message').value.trim();
    const subject = document.getElementById('formSubject').value || 'Website Inquiry';

    // If FORM_ENDPOINT provided, try to POST (Formspree expects form-encoded or JSON based on endpoint)
    if(FORM_ENDPOINT && FORM_ENDPOINT.trim()){
      try{
        const payload = {
          name, phone, email, message: msg, subject, locationId: SQUARE_LOCATION_ID
        };
        const res = await fetch(FORM_ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        if(res.ok){
          status.textContent = 'Message sent. We will contact you soon.';
          form.reset();
        } else {
          status.textContent = 'Failed to send via endpoint. Falling back to email client...';
          setTimeout(()=> fallbackMail(), 800);
        }
      }catch(err){
        console.error(err);
        status.textContent = 'Error contacting endpoint. Opening email client...';
        setTimeout(()=> fallbackMail(), 800);
      }
    } else {
      fallbackMail();
    }

    function fallbackMail(){
      const bodyLines = [
        `Name: ${name}`,
        `Phone: ${phone}`,
        `Email: ${email}`,
        '',
        `Message:`,
        msg,
        '',
        `Square Location ID: ${SQUARE_LOCATION_ID}`
      ];
      const mailto = `mailto:andersonroadautomotive@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(bodyLines.join('\n'))}`;
      window.location.href = mailto;
      status.textContent = 'Opened email client. If nothing opened, copy the details and send to andersonroadautomotive@gmail.com';
    }
  });
})();

</script>
</body>
</html>
